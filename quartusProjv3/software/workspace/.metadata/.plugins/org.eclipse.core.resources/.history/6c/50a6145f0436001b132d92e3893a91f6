/*
 * piano.c
 *
 *  Created on: Dec 1, 2020
 *      Author: Joshua
 */
#include <stdio.h>
#include "system.h"
#include "altera_avalon_pio_regs.h"
#include "altera_avalon_timer_regs.h"
#include "sys/alt_irq.h"
#include "alt_types.h"
#include "altera_up_avalon_ps2.h"
#include "altera_up_ps2_keyboard.h"
#include "sys/alt_dev.h"

int main()
{
    alt_putstr("program start");
    alt_up_ps2_dev *ps2S;  //set type to keyboard

	ps2S = alt_up_ps2_open_dev("swag",PS2_0_BASE);
	alt_up_ps2_init(ps2S);

    char psChar;
    alt_putstr("before while loop");
    while (1) //infinite while loop to wait for ints && IORD_ALTERA_AVALON_TIMER_STATUS(TIMER_0_BASE) == 0b01
    {
       // alt_up_ps2_read_data_byte(&ps2S, &psChar);
        psChar = IORD_8DIRECT(PS2_0_BASE, 0x0);
        if (psChar == 'w' )
        {
            alt_putstr(psChar);
            alt_putstr("state reset");
        }
    }
    return 0;
};

